# Devrix WordPress Theme

A modern WordPress theme built with Vite, Sass, and modern JavaScript.

## Overview

This theme uses **Vite** as the build tool to compile and bundle assets. Source files are located in `assets/src/` and compiled output is generated in `assets/dist/` automatically.

## Project Structure

```
devrix/
├── assets/
│   ├── dist/              # Generated files (auto-created, git-ignored)
│   │   ├── css/
│   │   │   └── main.css   # Compiled CSS from Sass
│   │   └── js/
│   │       └── bundle.js  # Compiled JavaScript bundle
│   ├── js/
│   │   └── slick.min.js   # Slick carousel library (copied from node_modules)
│   └── src/                # Source files (edit these)
│       ├── js/
│       │   ├── main.js    # Main JavaScript entry point
│       │   └── functions.js
│       └── sass/
│           ├── main.scss  # Main Sass entry point
│           ├── _base.scss
│           ├── _reset.scss
│           └── components/
├── functions.php           # WordPress theme functions
├── vite.config.js         # Vite configuration
└── package.json           # npm dependencies and scripts
```

## How It Works

### Build Process

1. **Source Files** (`assets/src/`)
   - Write your JavaScript in `assets/src/js/`
   - Write your Sass/SCSS in `assets/src/sass/`
   - Import dependencies and modules as needed

2. **Build Command**
   - Run `npm run build` to compile once
   - Run `npm run watch` to watch for changes and rebuild automatically

3. **Output** (`assets/dist/`)
   - Vite compiles and bundles everything into `assets/dist/`
   - CSS is compiled from Sass → `assets/dist/css/main.css`
   - JavaScript is bundled → `assets/dist/js/bundle.js`
   - The `dist/` folder is automatically cleared and regenerated on each build

### File Loading in WordPress

Files are loaded in `functions.php` via WordPress's `wp_enqueue_script()` and `wp_enqueue_style()` functions. The loading order is:

#### 1. **jQuery** (from WordPress)
```php
wp_enqueue_script('jquery');
```
- Loaded from WordPress core (no duplication)
- Required for slick-carousel and custom scripts

#### 2. **Slick Carousel** (from local file)
```php
wp_enqueue_script(
    'slick-carousel',
    get_template_directory_uri() . '/assets/js/slick.min.js',
    array('jquery'),
    '1.8.1',
    true
);
```
- Loaded from `/assets/js/slick.min.js`
- Depends on jQuery (loads after jQuery)
- This file is manually copied from `node_modules/slick-carousel/slick/slick.min.js`

#### 3. **Vite Bundle** (compiled assets)
```php
wp_enqueue_script(
    'devrix-scripts',
    get_template_directory_uri() . '/assets/dist/js/bundle.js',
    array('jquery', 'slick-carousel'),
    filemtime(...),
    true
);
```
- Loaded from `/assets/dist/js/bundle.js` (generated by Vite)
- Depends on jQuery and slick-carousel
- Contains your custom JavaScript code
- Includes imported CSS from Sass files

#### 4. **Compiled CSS** (from Sass)
```php
wp_enqueue_style(
    'devrix-main',
    get_template_directory_uri() . '/assets/dist/css/main.css',
    array('devrix-style'),
    filemtime(...)
);
```
- Loaded from `/assets/dist/css/main.css` (generated by Vite)
- Compiled from Sass files in `assets/src/sass/`
- Includes slick-carousel CSS (imported in `main.js`)

## Installation

1. **Install dependencies:**
   ```bash
   npm install
   ```

2. **Copy slick-carousel file:**
   ```bash
   cp node_modules/slick-carousel/slick/slick.min.js assets/js/
   ```

3. **Build assets:**
   ```bash
   npm run build
   ```

## Development

### Watch Mode (Auto-rebuild on changes)
```bash
npm run watch
```
This will watch for changes in `assets/src/` and automatically rebuild `assets/dist/`.

### Production Build
```bash
npm run build
```
Compiles and minifies all assets for production.

### Lint Sass
```bash
npm run lint:sass
```
Runs stylelint on all Sass files.

## Key Features

- ✅ **Modern Build Tool**: Uses Vite for fast builds and hot module replacement
- ✅ **Sass/SCSS**: Write styles in Sass with modern features
- ✅ **JavaScript Bundling**: ES6+ JavaScript bundled and transpiled
- ✅ **WordPress jQuery**: Uses WordPress's jQuery (no duplication)
- ✅ **Source Maps**: Generated for easier debugging
- ✅ **Auto-prefixing**: CSS automatically prefixed via PostCSS/Autoprefixer
- ✅ **Clean Architecture**: Source files separate from compiled output

## Important Notes

- **Never edit files in `assets/dist/`** - they are auto-generated and will be overwritten
- **Always edit files in `assets/src/`** - these are your source files
- **The `dist/` folder can be deleted** - it will be regenerated on the next build
- **Slick carousel** must be manually copied to `assets/js/` after installing/updating npm packages

## Dependencies

- **Vite**: Build tool and bundler
- **Sass**: CSS preprocessor
- **PostCSS + Autoprefixer**: CSS post-processing
- **slick-carousel**: jQuery carousel plugin
- **stylelint**: Sass/CSS linter

## WordPress Integration

The theme integrates seamlessly with WordPress:
- Uses WordPress's built-in jQuery (no conflicts)
- Proper dependency management via `wp_enqueue_script()`
- Cache busting with `filemtime()` for versioning
- Follows WordPress coding standards

